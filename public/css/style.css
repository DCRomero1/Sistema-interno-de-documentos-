:root {
    /* --- Tema Azul Administrativo --- */
    --primary-color: #2563eb;
    /* Azul Brillante */
    --secondary-color: #1e3a8a;
    /* Azul Oscuro */
    --accent-color: #3b82f6;
    /* Azul Cielo */

    --header-bg: #1e3a8a;
    /* Encabezado Azul Oscuro */
    --sidebar-bg: #f8f9fa;
    /* Gris Claro/Blanco */
    --text-color: #333;
    --sidebar-text: #555;
    --sidebar-hover-bg: #e9ecef;
    --border-color: #ddd;

    /* Dimensiones */
    --sidebar-width: 260px;
    --header-height: 60px;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Segoe UI', 'Roboto', Helvetica, Arial, sans-serif;
    background-color: #ffffff;
    display: flex;
    flex-direction: column;
    height: 100vh;
    overflow: hidden;
}

/* --- Barra Superior (Encabezado Rojo) --- */
.top-bar {
    height: var(--header-height);
    background-color: var(--header-bg);
    color: white;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    z-index: 20;
    /* Sobre la barra lateral */
    position: relative;
}

.top-bar-left {
    display: flex;
    align-items: center;
    gap: 20px;
}

.brand-text {
    font-family: 'Brush Script MT', cursive;
    /* O fuente script similar */
    font-size: 1.8rem;
    font-weight: normal;
}

.logout-link {
    color: white;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.95rem;
    cursor: pointer;
}

.logout-link:hover {
    text-decoration: underline;
}


/* --- Contenedor Principal (Barra Lateral + Contenido) --- */
/* We need to restructure body to be column? No, body was flex row. 
   The image implies top bar spans full width. 
   So Body should be Column if Top Bar is top.
   BUT, usually Layout is:
   Top Bar (Width 100%)
   Flex Container (Sidebar + Content)
*/
/* Ajustar el cuerpo para ser Header + Fila Flexible */

body {
    display: flex;
    flex-direction: column;
}

.app-container {
    display: flex;
    flex: 1;
    overflow: hidden;
    /* Para hacer scroll dentro del área de contenido */
}

/* Barra Lateral */
.sidebar {
    width: var(--sidebar-width);
    background-color: var(--sidebar-bg);
    /* Blanco/Claro */
    border-right: 1px solid var(--border-color);
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
    transition: width 0.3s ease;
    z-index: 10;
}

.sidebar.collapsed {
    width: 70px;
}

/* Sección de Perfil de Usuario en Barra Lateral */
.sidebar-user-profile {
    display: flex;
    align-items: center;
    padding: 20px 15px;
    border-bottom: 1px solid #eee;
    background-color: #fff;
    margin-bottom: 10px;
}

.user-avatar-circle {
    width: 45px;
    height: 45px;
    background-color: #fce4ec;
    /* Light pink/redish or maybe yellow/orange icon like image */
    /* La imagen tiene un chico amarillo/naranja */
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 15px;
    color: #e65100;
    /* Naranja Oscuro */
    font-size: 1.5rem;
}

/* En modo colapsado, ocultar texto, centrar icono */
.sidebar.collapsed .sidebar-user-profile {
    padding: 15px 5px;
    justify-content: center;
}

.sidebar.collapsed .user-welcome-text {
    display: none;
}

.sidebar.collapsed .user-avatar-circle {
    margin-right: 0;
}

.user-welcome-text {
    display: flex;
    flex-direction: column;
}

.welcome-label {
    font-size: 0.75rem;
    color: #888;
    margin-bottom: 2px;
}

.user-name {
    font-weight: 700;
    color: #333;
    font-size: 0.95rem;
    text-transform: uppercase;
}

/* Menú de Navegación */
.nav-menu {
    list-style: none;
    padding: 0;
    /* Eliminar relleno */
    flex-grow: 1;
}

.nav-item {
    border-bottom: 1px solid #f0f0f0;
    /* Líneas separadoras */
}

.nav-link {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    color: var(--sidebar-text);
    text-decoration: none;
    font-size: 0.95rem;
    font-weight: 500;
    transition: background 0.2s;
}

.nav-link:hover,
.nav-link.active {
    background-color: var(--sidebar-hover-bg);
    color: #000;
    border-left: 4px solid transparent;
}

/* If active, maybe show a border or specific color? Image doesn't show clearly. */
/* Agregar un pequeño borde izquierdo para el activo */
.nav-link.active {
    border-left-color: var(--primary-color);
    background-color: #f1f1f1;
}

.nav-icon {
    width: 25px;
    text-align: center;
    margin-right: 10px;
    color: #777;
    font-size: 1.1rem;
}

.sidebar.collapsed .nav-link {
    justify-content: center;
    padding: 15px 0;
}

.sidebar.collapsed .nav-icon {
    margin-right: 0;
}

.sidebar.collapsed .nav-link span:not(.nav-icon) {
    /* This won't work easily if text is bare. Hopefully text is wrapped if I edit HTML or I rely on flex hiding overflow? */
    /* Wait, the HTML I wrote has text directly in 'a'. */
    /* Let's assume text is hidden by font-size 0 trick or display none logic */
    display: none;
}

/* De hecho, más simple: */
.sidebar.collapsed .nav-link {
    font-size: 0;
}

.sidebar.collapsed .nav-icon {
    font-size: 1.2rem;
}


/* Pie de Página de Barra Lateral */
.sidebar-footer {
    padding: 20px;
    border-top: 1px solid #eee;
    text-align: center;
}

.sidebar-logo {
    max-width: 100%;
    height: auto;
}

.sidebar.collapsed .sidebar-footer {
    display: none;
}

/* Ajustes del Área de Contenido Principal */
.main-content {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    /* Since we changed body to flex-col, main-content needs to take remaining height? */
    /* Wait, I need a wrapper for Sidebar + Content if specific scrolling behavior is desired. */
    /* Current HTML structure: Body > Sidebar, Main. */
    /* If I want Top Bar full width first... I need to move Sidebar INSIDE or change HTML structure. */
    /* The replace_file_content for index.html KEPT Sidebar and Main as siblings. */
    /* So structure is: Body -> Sidebar, Main. */
    /* In that case, Sidebar is full height (minus header?), Main is full height. */
    /* BUT I put header inside Main in replace_file_content. */
    /* Wait, check previous step output. */
    /* "    <main class="main-content"> <header class="top-bar">" */
    /* So Header IS inside Main. */
    /* That means Sidebar is separate on the left, Main (with Header) is on the right. */
    /* This matches standard dashboard: Sidebar (full height), Main (Header + Content). */
    /* So 'Administración' header will be to the right of Sidebar. */
    /* BUT the image shows Header spanning FULL WIDTH (including above sidebar). */
    /* Actually look at image: The Red Bar "Administración" seems to be above everything, OR sidebar is below it. */
    /* The sidebar top starts with User Profile. */
    /* So header is definitely TOP FULL WIDTH. */
    /* My Structure: Sidebar | Main(Header + Content). This puts Header next to sidebar. */
    /* This is NOT what the image shows likely. Image has "Administración" at far left. */
    /* Wait, if "Administración" is far left, does it cover sidebar area? */
    /* If Sidebar is BELOW text "Administración", then Top Bar is full width. */
    /* Let's assume Top Bar is Full Width. */
}

.content-area {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
    background-color: var(--bg-color);
}

/* Estadísticas del Panel y Reportes */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
}

.stat-card {
    background-color: white;
    border-radius: 12px;
    padding: 20px;
    display: flex;
    align-items: center;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: transform 0.2s;
    border: none;
}

.stat-card:hover {
    transform: translateY(-3px);
}

.stat-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin-right: 15px;
}

.stat-info {
    display: flex;
    flex-direction: column;
}

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary-color);
    line-height: 1.2;
}

.stat-label {
    font-size: 0.85rem;
    color: #7f8c8d;
    font-weight: 500;
}

/* Efecto de Tarjeta/Papel */
.paper-card {
    background-color: var(--paper-color);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    /* Sombra más fuerte para efecto flotante */
    border: none;
    overflow: hidden;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.paper-card.auto-height {
    height: auto;
    min-height: auto;
    /* Permitir que se encoja si es necesario */
    overflow: visible;
}


/* Sección de Búsqueda y Filtro */
/* Sección de Búsqueda y Filtro */
.search-section {
    padding: 20px;
    background-color: white;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    gap: 20px;
    align-items: center;
    flex-wrap: nowrap;
    /* Forzar una sola línea por defecto */
    justify-content: flex-start;
    /* Alinear a la izquierda inicialmente */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    /* Sombra suave */
    border-radius: 12px 12px 0 0;
    /* Bordes superiores redondeados */
    z-index: 5;
    position: relative;
    margin-bottom: 0;
    /* Pegado a la tabla */
}

/* Caja de Búsqueda */
.search-box {
    flex-grow: 1;
    position: relative;
    /* min-width: 300px;  Removed to allow shrinking */
    max-width: 600px;
    /* Reduced max width slightly to give space */
    margin-right: auto;
    /* Push filters to right */
}

.search-icon {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--primary-color);
    /* Color activo */
    font-size: 1.1rem;
    pointer-events: none;
}

.search-input {
    width: 100%;
    padding: 12px 15px 12px 45px;
    /* Más espacio */
    border: 1px solid #e2e8f0;
    /* Borde sutil */
    border-radius: 8px;
    /* Bordes cuadrados suaves */
    background-color: #f8fafc;
    transition: all 0.2s ease;
    font-size: 0.95rem;
    color: var(--text-color);
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.02);
}

.search-input::placeholder {
    color: #94a3b8;
}

.search-input:focus {
    background-color: white;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
    /* Resplandor azul */
    outline: none;
}

/* Caja de Filtros */
.filter-box {
    display: flex;
    gap: 12px;
    align-items: center;
}

.filter-select {
    padding: 11px 35px 11px 15px;
    /* Espacio para flecha custom si se añade */
    border-radius: 8px;
    border: 1px solid #e2e8f0;
    background-color: white;
    cursor: pointer;
    font-size: 0.9rem;
    color: var(--text-color);
    min-width: 160px;
    transition: all 0.2s ease;
    appearance: none;
    /* Quitar estilo nativo */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%2364748b' stroke-width='2'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    background-size: 16px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.filter-select:hover {
    border-color: #cbd5e1;
    background-color: #f8fafc;
}

.filter-select:focus {
    border-color: var(--primary-color);
    outline: none;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
}

/* Botón de Icono */
.btn-icon-only {
    padding: 12px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: white;
    border: 1px solid #e2e8f0;
    color: #64748b;
    cursor: pointer;
    transition: all 0.2s;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    height: 42px;
    /* Igualar altura a inputs */
    width: 42px;
}

.btn-icon-only:hover {
    background-color: #f1f5f9;
    color: var(--primary-color);
    border-color: #cbd5e1;
}

.btn-icon-only:active {
    transform: translateY(1px);
    box-shadow: none;
}

@media (max-width: 768px) {
    .search-section {
        flex-direction: column;
        align-items: stretch;
        gap: 10px;
    }

    .filter-box {
        overflow-x: auto;
        padding-bottom: 5px;
    }
}

/* Tabla del Libro de Registro */
/* Tabla de Registro - Estilo Empresarial Limpio */
.registry-container {
    flex-grow: 1;
    overflow: auto;
    position: relative;
    border-radius: 8px;
    /* Bordes suaves para el contenedor */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    /* Sombra sutil del contenedor */
}

.registry-table {
    width: 100%;
    border-collapse: separate;
    /* Permite border-radius en filas si es necesario */
    border-spacing: 0;
    /* Pero los mantiene cerca */
    min-width: 800px;
}

.registry-table thead th {
    background-color: rgba(248, 250, 252, 0.95);
    /* Semitransparente */
    backdrop-filter: blur(8px);
    /* Efecto de vidrio */
    color: #475569;
    /* Pizarra 600 */
    text-transform: uppercase;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    text-align: left;
    padding: 16px;
    font-weight: 700;
    position: sticky;
    top: 0;
    z-index: 10;
    border-bottom: 2px solid #e2e8f0;
}

.registry-table tbody td {
    padding: 16px;
    border-bottom: 1px solid #f1f5f9;
    /* Borde muy claro */
    vertical-align: middle;
    font-size: 0.9rem;
    color: #334155;
    /* Pizarra 700 */
    transition: color 0.2s;
    text-transform: capitalize;
    /* Solicitud de usuario: Capitalizar texto */
}

/* Alineación específica para columnas de texto largo */
.registry-table td:nth-child(4),
/* Remitente */
.registry-table td:nth-child(6) {
    /* Concepto */
    text-align: left;
}


/* Efecto Hover en Fila */
.registry-table tbody tr {
    transition: all 0.2s ease;
    background-color: white;
}

.registry-table tbody tr:hover {
    background-color: #f8fafc;
    /* Azul/Gris muy claro */
    transform: scale(1.002);
    /* Micro-interacción para sensación táctil */
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    /* Efecto de elevación */
    z-index: 1;
    position: relative;
}

/* Eliminar rayado par/impar para un aspecto más limpio, o mantenerlo muy sutil. 
   Vamos a eliminarlo para favorecer el aspecto limpio. */
.registry-table tbody tr:nth-child(even) {
    background-color: white;
}

/* Truncamiento de Concepto */
.truncate-concept {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 250px;
    display: block;
    cursor: help;
    /* Pista de que hover revela más */
}

.registry-table tbody tr:nth-child(even) {
    background-color: #fafafa;
}

.registry-table tbody tr:hover {
    background-color: #f9fafb;
    cursor: default;
}

/* Center Actions Column */
/* Columna de Acciones Centrada */
.registry-table th:last-child,
.registry-table td:last-child {
    text-align: center !important;
}

/* Botones */
.btn {
    padding: 10px 24px;
    border-radius: 8px;
    /* Redondeado más suave */
    border: none;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-family: inherit;
}

.btn-primary {
    /* Gradiente Eléctrico Vibrante */
    background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
    color: white;
    box-shadow: 0 4px 6px -1px rgba(37, 99, 235, 0.3), 0 2px 4px -1px rgba(37, 99, 235, 0.15);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 15px -3px rgba(37, 99, 235, 0.4), 0 4px 6px -2px rgba(37, 99, 235, 0.2);
    filter: brightness(1.05);
}

.btn-secondary {
    background-color: #95a5a6;
    color: white;
}

.btn-secondary:hover {
    background-color: #7f8c8d;
}

/* Formularios */
.form-container {
    padding: 30px;
    max-width: 800px;
    margin: 0 auto;
}

.form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
}

.form-group {
    margin-bottom: 15px;
}

.form-group.full-width {
    grid-column: span 2;
}

.form-label {
    display: block;
    margin-bottom: 5px;
}

/* Información de Usuario y Desplegable */
.user-info {
    font-weight: 600;
    color: var(--primary-color);
    position: relative;
    cursor: pointer;
    background-color: #f1f5f9;
    /* Píldora de fondo claro */
    padding: 8px 20px;
    border-radius: 30px;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 10px;
    border: 1px solid transparent;
}

.user-info:hover {
    background-color: white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
    border-color: var(--border-color);
    transform: translateY(-1px);
}

.dropdown-menu {
    display: none;
    position: absolute;
    top: 120%;
    /* Ligeramente separado */
    right: 0;
    background-color: white;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    min-width: 180px;
    z-index: 1000;
    margin-top: 5px;
    border: 1px solid #f0f0f0;
    overflow: hidden;
    /* Para esquinas suaves */
}

.dropdown-menu.show {
    display: block;
}

.dropdown-item {
    display: block;
    padding: 10px 15px;
    color: var(--text-color);
    text-decoration: none;
    transition: background 0.2s;
}

.dropdown-item:hover {
    background-color: var(--background-color);
    color: var(--primary-color);
}

.dropdown-item i {
    width: 20px;
    margin-right: 5px;
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: 12px;
    /* Un poco más de relleno */
    border: 1px solid var(--border-color);
    border-radius: 8px;
    /* Esquinas más suaves */
    font-family: inherit;
    font-size: 0.95rem;
    background-color: #f8fafc;
    /* Fondo gris pálido */
    transition: all 0.3s ease;
    /* Transición fluida */
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    background-color: #ffffff;
    /* Blanco al enfocar */
    border-color: #3b82f6;
    /* Azul vibrante */
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    /* Resplandor suave */
}

.input-error {
    border: 1px solid #e74c3c !important;
    background-color: #fdf2f2;
}

/* --- Themed Modal Styles (Global) --- */
.modal-content-themed {
    background-color: #f6f6f6;
    background-image: radial-gradient(#e0e0e0 1px, transparent 1px);
    background-size: 10px 10px;
    /* Dot texture simulation */
    border: none;
    border-radius: 4px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    padding: 40px !important;
    max-width: 500px;
    position: relative;
}

.themed-header-title {
    font-family: 'Arial', sans-serif;
    /* Fallback */
    font-weight: 900;
    font-style: italic;
    text-transform: uppercase;
    text-align: center;
    font-size: 1.5rem;
    margin-bottom: 20px;
    color: #1a1a1a;
    letter-spacing: 1px;
}

.themed-label {
    font-weight: 600;
    font-size: 0.9rem;
    color: #333;
    margin-bottom: 5px;
    display: block;
}

.themed-input {
    width: 100%;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 2px;
    background: white;
    font-size: 1rem;
    color: #555;
    margin-bottom: 15px;
    box-sizing: border-box;
}

.themed-input:focus {
    outline: none;
    border-color: #cbd5e1;
}

.themed-btn-primary {
    background: #8b5cf6;
    /* Purple */
    background: linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%);
    color: white;
    border: none;
    padding: 12px 40px;
    font-size: 1.2rem;
    font-weight: 800;
    font-style: italic;
    text-transform: uppercase;
    cursor: pointer;
    transform: skewX(-10deg);
    /* Slanted Look */
    display: block;
    margin: 20px auto 0;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.2s;
}

.themed-btn-primary span {
    display: block;
    transform: skewX(10deg);
    /* Un-skew text */
}

.themed-btn-primary:hover {
    transform: skewX(-10deg) scale(1.05);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.themed-close {
    position: absolute;
    top: -15px;
    right: -15px;
    background: #666;
    color: white;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-weight: bold;
    border: 2px solid white;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.themed-close:hover {
    background: #333;
}

.form-actions {
    grid-column: span 2;
    margin-top: 20px;
    display: flex;
    gap: 10px;
    justify-content: flex-end;
}

/* Responsivo */
@media (max-width: 768px) {
    body {
        flex-direction: column;
        height: auto;
    }

    .sidebar {
        width: 100%;
        height: auto;
    }

    .main-content {
        height: 100vh;
    }

    /* Tabla responsiva - Vista de Tarjeta */
    .registry-table thead {
        display: none;
    }

    .registry-table,
    .registry-table tbody,
    .registry-table tr,
    .registry-table td {
        display: block;
        width: 100%;
    }

    .registry-table tr {
        margin-bottom: 15px;
        background-color: white;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    }

    .registry-table td {
        text-align: right;
        padding-left: 50%;
        position: relative;
        border-bottom: 1px solid #eee;
    }

    .registry-table td:last-child {
        border-bottom: 0;
        text-align: center;
        /* Acciones centradas */
        padding-left: 15px;
    }

    .registry-table td::before {
        content: attr(data-label);
        position: absolute;
        left: 15px;
        width: 45%;
        padding-right: 10px;
        text-align: left;
        font-weight: bold;
        color: var(--secondary-color);
    }

    /* Ajuste de Título Móvil */
    .page-title {
        position: static;
        /* Apilar normalmente */
        transform: none;
        width: 100%;
        text-align: center;
        margin-bottom: 5px;
        font-size: 1.1rem;
        white-space: normal;
        /* Permitir ajuste de línea */
    }

    .top-bar {
        padding: 10px 15px;
        height: auto;
        /* Permitir crecimiento */
        flex-direction: column;
        /* Apilar elementos */
        justify-content: center;
        gap: 5px;
    }

    .user-info {
        align-self: center;
        /* Centrar píldora de usuario */
        width: 100%;
        justify-content: center;
    }

    /* Refinamiento de Vista de Tarjeta Móvil para Tabla */
    .registry-table td {
        display: flex;
        /* Usar flex para mejor control */
        justify-content: space-between;
        /* Espacio entre etiqueta y valor */
        text-align: right;
        padding: 10px 15px;
        position: relative;
        border-bottom: 1px solid #eee;
        min-height: 40px;
        /* Asegurar altura */
        align-items: center;
    }

    .registry-table td::before {
        content: attr(data-label);
        position: static;
        /* No absoluto */
        width: auto;
        /* Ancho automático */
        padding-right: 15px;
        text-align: left;
        font-weight: 700;
        color: var(--secondary-color);
        flex-shrink: 0;
        /* No encoger etiqueta */
        flex-basis: 40%;
        /* Ancho objetivo para etiqueta */
    }

    /* Sobreescribir hack anterior de padding-left */
    .registry-table td {
        padding-left: 15px;
    }
}

/* Botón de Área */
.btn-area {
    background-color: #e8f4f8;
    color: #2980b9;
    border: 1px solid #2980b9;
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    font-weight: 600;
    text-decoration: none;
}

.btn-area:hover {
    background-color: #2980b9;
    color: white;
}

.btn-area i {
    margin-right: 6px;
}

/* Botones de Acción */
.btn-icon {
    background: none;
    border: none;
    cursor: pointer;
    color: #7f8c8d;
    font-size: 1.1rem;
    transition: color 0.2s;
    padding: 5px;
}

.btn-icon:hover {
    color: var(--accent-color);
}

.btn-icon.edit:hover {
    color: #f39c12;
}

/* Modal */
.modal {
    display: none;
    /* Oculto por defecto */
    position: fixed;
    z-index: 100;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(2px);
}

.modal-content {
    background-color: #fefefe;
    margin: 10% auto;
    padding: 0;
    border: 1px solid #888;
    width: 50%;
    max-width: 600px;
    border-radius: 8px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    animation: slideIn 0.3s;
}

@keyframes slideIn {
    from {
        transform: translateY(-50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.modal-header {
    padding: 15px 20px;
    background-color: var(--primary-color);
    color: white;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.close-modal {
    color: white;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
}

.close-modal:hover {
    color: #bdc3c7;
}

.modal-body {
    padding: 20px;
}

.modal-footer {
    padding: 15px 20px;
    background-color: #f9f9f9;
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
    text-align: right;
    border-top: 1px solid #eee;
}

/* Estilos del Modal de Historial */
.history-container {
    overflow-x: auto;
}

.history-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
}

.history-table th {
    background-color: #f8f9fa;
    color: #555;
    padding: 12px;
    text-align: left;
    font-size: 0.9rem;
    font-weight: 600;
    border-bottom: 2px solid #e2e8f0;
}

.history-table td {
    padding: 12px;
    border-bottom: 1px solid #eee;
    font-size: 0.85rem;
    /* Ligeramente más pequeño para mejor ajuste */
    vertical-align: top;
    /* Alinear texto arriba para mejor legibilidad multilínea */
}

/* Ajustes específicos de columna */
.history-table td:nth-child(1),
/* Fecha */
.history-table td:nth-child(2)

/* Acción */
    {
    white-space: nowrap;
}

.history-table tr:nth-child(even) {
    background-color: #f9f9f9;
}

.history-table tr:hover {
    background-color: #f0f0f0;
}

/* Insignias de Estado - Píldoras Modernas */
.badge {
    padding: 4px 8px;
    border-radius: 9999px;
    /* Píldora completa */
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.025em;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    white-space: nowrap;
    box-shadow: none;
    /* Aspecto plano más limpio */
}

/* Estado: Recibido (Azul) */
.badge-received {
    background-color: #eff6ff;
    /* Blue 50 */
    color: #2563eb;
    /* Blue 600 */
    border: 1px solid #dbeafe;
    /* Blue 100 */
}

/* Estado: Derivado (Ámbar/Naranja) */
.badge-derived {
    background-color: #fffbeb;
    /* Amber 50 */
    color: #d97706;
    /* Amber 600 */
    border: 1px solid #fef3c7;
    /* Amber 100 */
}

/* Estado: Finalizado (Verde) */
.badge-finalized {
    background-color: #f0fdf4;
    /* Green 50 */
    color: #16a34a;
    /* Green 600 */
    border: 1px solid #dcfce7;
    /* Green 100 */
}

/* Agregar: Diseño de cerrar sesión */

/* --- NUEVOS ESTILOS DE HISTORIAL DE LÍNEA DE TIEMPO --- */
.history-container {
    background-color: #f8fafc;
    /* Fondo claro para contraste */
    padding: 20px;
    border-radius: 8px;
    max-height: 60vh;
    overflow-y: auto;
}

.timeline {
    list-style: none;
    padding: 0;
    margin: 0;
    position: relative;
    padding-left: 30px;
    /* Espacio para línea */
}

/* Línea Vertical */
.timeline::before {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    left: 10px;
    /* Centro del marcador */
    width: 2px;
    background-color: #e2e8f0;
}

.timeline-item {
    position: relative;
    margin-bottom: 30px;
}

.timeline-item:last-child {
    margin-bottom: 0;
}

/* Punto Marcador */
.timeline-marker {
    position: absolute;
    left: -26px;
    /* Ajustar basado en padding-left de UL (30px) - (AnchoMarcador/2 + AnchoLínea/2) */
    /* Espera, el padding-left de ul es 30px. La línea está a 10px de la izquierda de ul. El centro del marcador debe ser 10px.
       Ancho del marcador 14px. Izquierda = 10px - 7px = 3px relativo a UL.
       Sin embargo, el elemento está dentro de UL. ¿El elemento se desplaza a la derecha por el padding de 30px? No, el padding está en UL.
       Así que el contenido del elemento comienza en 30px.
       Izquierda absoluta del elemento es 0 (que es 30px desde el borde de ul).
       Así que el marcador necesita estar a -20px o así?
       Usemos left: -27px; (30px - 7px - ajustes aproximados).
       De hecho más fácil: left: -26px funciona bien usualmente.
       Alineemos estrictamente: top: 20px (alinear con encabezado).
    */
    top: 15px;
    left: -27px;
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 3px solid #fff;
    /* Anillo blanco */
    box-shadow: 0 0 0 2px #e2e8f0;
    z-index: 1;
    background-color: #94a3b8;
    /* Gris por defecto */
}

.timeline-marker.badge-received {
    background-color: var(--primary-color);
    box-shadow: 0 0 0 2px #bfdbfe;
}

.timeline-marker.badge-derived {
    background-color: #f59e0b;
    box-shadow: 0 0 0 2px #fde68a;
}

.timeline-marker.badge-finalized {
    background-color: #10b981;
    box-shadow: 0 0 0 2px #a7f3d0;
}


/* Tarjeta de Contenido */
.timeline-content {
    background: white;
    border-radius: 12px;
    padding: 20px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    border: 1px solid #f1f5f9;
    font-family: system-ui, -apple-system, sans-serif;
}

.timeline-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #f8fafc;
}

.timeline-datetime {
    font-size: 0.95rem;
    font-weight: 600;
    color: #475569;
    display: flex;
    align-items: center;
    gap: 8px;
}

.tm-time {
    font-weight: 400;
    color: #94a3b8;
    font-size: 0.85rem;
    padding-left: 8px;
    border-left: 1px solid #e2e8f0;
}

.timeline-badge {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: white;
}

/* Reutilizando colores de insignias existentes */
.timeline-badge.badge-received {
    background-color: var(--primary-color);
}

.timeline-badge.badge-derived {
    background-color: #f59e0b;
}

.timeline-badge.badge-finalized {
    background-color: #10b981;
}


/* Ruta del Cuerpo */
.timeline-route {
    display: flex;
    align-items: center;
    gap: 15px;
    background-color: #f8fafc;
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 15px;
}

.route-node {
    display: flex;
    flex-direction: column;
    flex: 1;
}

.route-node.source {
    text-align: right;
}

.route-node.dest {
    text-align: left;
}

.route-node .label {
    font-size: 0.7rem;
    text-transform: uppercase;
    color: #94a3b8;
    font-weight: 700;
}

.route-node .value {
    font-size: 0.95rem;
    color: #334155;
    font-weight: 600;
    text-transform: capitalize;
    /* Capitalización limpia */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
}

.route-arrow {
    color: #cbd5e1;
    font-size: 1.2rem;
}

.timeline-meta {
    font-size: 0.9rem;
    color: #64748b;
    margin-bottom: 8px;
}

.timeline-meta strong {
    color: #475569;
}

.timeline-obs {
    margin-top: 10px;
    background-color: #fffbeb;
    /* Amarillo claro para nota */
    border-left: 3px solid #fcd34d;
    padding: 10px 15px;
    border-radius: 0 8px 8px 0;
}

.timeline-obs strong {
    display: block;
    font-size: 0.8rem;
    color: #b45309;
    margin-bottom: 4px;
}

.timeline-obs p {
    margin: 0;
    font-size: 0.9rem;
    color: #78350f;
    font-style: italic;
    text-transform: capitalize;
}